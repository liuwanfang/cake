Site.ImageEffect=!!Site.ImageEffect?Site.ImageEffect:{};(function(a,c,b){c.DATA={};c.DATA.imageEffectHtml="<div class='imageEffects imageEffectsAnimate'></div>";c.DATA.KEY={OPT_MODULE_ID:"moduleId",OPT_IMG_EFF_OPTION:"imgEffOption",OPT_TG_OPTION:"tagetOption",OPT_CALLBACK:"callback",OPT_CALLBACK_ARGS:"callbackArgs",FULL_MASK_BG_STYLE:"fmbgs",FULL_MASK_NAME_STYLE:"fmns",FULL_MASK_NAME_ALIG:"fmna",FULL_MASK_DISC_STYLE:"fmds",FULL_MASK_DISC_ALIG:"fmda",FULL_MASK_CUS_BG:"fullMaskCusBg",FULL_MASK_CUS_NAME:"fullMaskCusName",FULL_MASK_CUS_DISC:"fullMaskCusDisc",FULL_MASK_OPEN_DISC:"fullMaskOpenDisc",ALIG:{CENTER:1,LEFT:2,RIGHT:3}};c.FUNC={BASIC:{},BUS:{},TOOL:{}};c.ITF={cardTd:Site.bindImageEffectCusEvent_photo,"photo-container":Site.bindImageEffectCusEvent_photo,photoForm:Site.bindImageEffectCusEvent_photo,photoMarqueeForm:Site.bindImageEffectCusEvent_photo,photoSmallPic_table:Site.bindImageEffectCusEvent_photo,productTileForm:Site.bindImageEffectCusEvent_product,productMarqueeForm:Site.bindImageEffectCusEvent_product,"product-container":Site.bindImageEffectCusEvent_product,productDoublePicListForm:Site.bindImageEffectCusEvent_product,containerLeft:Site.bindImageEffectCusEvent_product,productHotTextListHot:Site.bindImageEffectCusEvent_product,productPicListForm:Site.bindImageEffectCusEvent_product}})(jQuery,Site.ImageEffect);(function(a,c,b){c.FUNC.TOOL.resetImgEff=function(g,n,t,q){var f=g.targetParent;var u=a(n).find("img");if(u.length==0){u=a(n).find(".J_fonticon")}var d=a(u).position().top;var h=a(u).position().left;var e=a(u).width();var l=a(u).height();var s=a(u).css("margin-left");var m=a(t).css("border-left-width");var i=a(n).css("padding").replace("px","");var k=g.paramLayoutType||0;var j=g.picScale||0;var r=a(n).position().top;var p=a(n).height();var o=a(n).parent().css("padding-top").replace("px","");s=c.FUNC.TOOL.parsePixelToInt(s);m=c.FUNC.TOOL.parsePixelToInt(m);if(f=="photoSmallPic_table"){a(t).css("left",h+s).css("top",d);a(t).css("width",e-(m*2)+"px");a(t).css("height",l-(m*2)+"px")}if(f=="photo-container"||f=="product-container"){if(q!=5){if(k==8&&q==2){a(t).css("left",0).css("top",r-o)}else{a(t).css("left",h+s).css("top",d)}if((q==2||q==3||q==5)&&j==2){a(t).css("left",0)}}else{a(t).css("left",h+s)}}};c.FUNC.TOOL.parsePixelToInt=function(d){var e;if(typeof d=="undefined"||d=="auto"){e=0}else{e=parseInt(d.replace("px"))}return e};c.FUNC.TOOL.colorRgb=function(e){var g=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;var e=e.toLowerCase();var d="#";var h=[];if(e&&g.test(e)){if(e.length===4){for(var f=1;f<4;f+=1){d+=e.slice(f,f+1).concat(e.slice(f,f+1))}e=d}for(var f=1;f<7;f+=2){h.push(parseInt("0x"+e.slice(f,f+2)))}return h.join(",")}else{return e}}})(jQuery,Site.ImageEffect);(function(d,f,e){f.FUNC.BUS.bindImgEffCusEvent=function(h,g){if(typeof f.ITF[g.targetParent]=="function"){f.ITF[g.targetParent](h,g)}};f.FUNC.BUS.ImgEffAnimate=function(m,g,k,l,h){var j={hover:{},leave:{}};var i=d(g).attr("fk_fixed");if(!!!i){if(d(l).hasClass("cardDiv")){c(g,k,l)}else{b(g,k)}}a(j,g,k,h);if(!Fai.isIE()){if(m=="mouseenter"){d(g).css(j.hover)}else{if(m=="mouseleave"){d(g).css(j.leave)}}}else{if(m=="mouseenter"){d(g).stop().animate(j.hover,250)}else{if(m=="mouseleave"){d(g).stop().animate(j.leave,250)}}}};function a(q,r,j,i){var o=j.effType;var p=1;var l;if(d(r).parent().hasClass("cardDiv")){l=d(r).parent()}if(Fai.isIE6()||Fai.isIE7()||Fai.isIE8()){if(j.backgroundType){p=j.fullmaskBackgroundOpacity}else{p=80}if(j[f.DATA.KEY.FULL_MASK_CUS_BG]){var h=j[f.DATA.KEY.FULL_MASK_BG_STYLE];if(typeof h=="string"&&h.length>0){var g=d.parseJSON(h);p=typeof g.o=="number"?g.o:80}}p/=100}switch(o){case 2:q.hover.opacity=1;q.leave.opacity=0;break;case 3:q.hover.opacity=1;q.leave.opacity=0;break;case 4:q.hover.opacity=p;q.leave.opacity=0;break;case 5:d(r).css("opacity",1);q.hover.bottom=0;q.leave.bottom="-"+d(r).height()+"px";var k;if(l&&l.length>0){k=parseFloat(l.css("margin-top").replace("px",""))||0;q.hover.bottom=-k;q.leave.bottom=(-k-d(r).height())+"px"}break;case 6:var n=parseInt(d(r).attr("_initWidth"));var m=parseInt(d(r).attr("_initHeight"));q.hover.width=n+50;q.hover.height=m+50;if(i==8){q.hover.margin="-25px"}else{q.hover["margin-left"]="-25px";q.hover["margin-top"]="-25px"}if(!!j.isFontIcon){q.hover.fontSize=(n<m?n:m)+50+"px";q.hover.lineHeight=m+50+"px"}q.leave.width=n;q.leave.height=m;if(i==8){q.leave.margin="0px"}else{q.leave["margin-left"]="0px";q.leave["margin-top"]="0px"}if(!!j.isFontIcon){q.leave.fontSize=(n<m?n:m)+"px";q.leave.lineHeight=m+"px"}break;case 7:q.hover["margin-left"]="-10px";q.leave["margin-left"]="0px";break}}function b(s,l){var q=l.effType;if(q==4){var t=d(s).find(".props .propList");var g=d(t).height();var n=d(s).height();var p=((n-g)/2-10);d(t).css("padding-top",p+"px")}if(q==5){var t=d(s).find(".props .propList");var k=d(s).find(".props .propBuy");var i=d(t).height();var m=parseInt(d(t).css("padding-top"));var o=parseInt(d(t).css("margin-bottom"));var r=d(s).parent().find("img").position().left;i+=m+o;if(d(k).length>0){var j=parseInt(d(k).css("margin-top"));var h=d(k).height()+j+8;i+=h}d(s).css({height:i+"px",bottom:"-"+i+"px",left:r+"px"})}d(s).attr("fk_fixed",1)}function c(j,s,A){var t=s.effType;var B,q,w;if(t==4){var h=d(A).parent(),o=-parseInt(d(A).css("marginLeft").replace("px",""))||0;cardDivMT=-parseInt(d(A).css("marginTop").replace("px",""))||0;d(j).css({width:h.width()+"px",height:h.height()+"px",left:o+"px",top:cardDivMT+"px"});var n=d(j).find(".props .propList");var r=d(n).height();var u=d(j).height();var z=((u-r)/2);d(n).css("padding-top",z+"px")}else{if(t==5){var j=d(A).find(".imageEffects");B=d(A).parent();q=d(B).width();w=d(B).height();var m=d(B).css("margin-left"),l=parseFloat(d(A).css("margin-left").replace("px",""));var m=f.FUNC.TOOL.parsePixelToInt(m);d(j).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half");d(j).css("width",q);var g=d(n).height(),n=d(j).find(".props .propList"),v=d(j).find(".props .propBuy"),g=d(n).height(),x=parseInt(d(n).css("padding-top")),p=parseInt(d(n).css("margin-bottom")),i=d(j).parent().find("img").position().left;g+=x+p;if(d(v).length>0){var k=parseInt(d(v).css("margin-top"));var y=d(v).height()+k+8;g+=y}d(j).css("height",g+"px");d(j).css({"padding-left":(-l)+"px"})}else{if(t==6){B=d(A).find("img");q=B.width();w=B.height();if(q==0||w==0){return}d(B).attr("_initWidth",q).attr("_initHeight",w)}else{if(t==7){B=d(A).find("img");q=B.width();if(q==0){return}B.css("width",q+10+"px")}}}}d(j).attr("fk_fixed",1)}})(jQuery,Site.ImageEffect);(function(f,h,g){h.FUNC.BASIC.Init=function(j){var m={};m[h.DATA.KEY.OPT_MODULE_ID]=0;m[h.DATA.KEY.OPT_IMG_EFF_OPTION]={};m[h.DATA.KEY.OPT_TG_OPTION]={};m[h.DATA.KEY.OPT_CALLBACK]=g;m[h.DATA.KEY.OPT_CALLBACK_ARGS]=g;if(!!!e(j,m)){return}var l=f("#module"+m[h.DATA.KEY.OPT_MODULE_ID]);var k=m[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType;if(k==1||Fai.isNull(l)){return}if(l.attr("_intab")!=0){h.cashOptions=h.cashOptions||{};h.cashOptions[j.moduleId]=j}var n=f(l).find(".imageEffects");var i=f(l).find("."+m[h.DATA.KEY.OPT_TG_OPTION].target);if(f(n).length>0){f(n).remove()}f.each(i,function(o,p){if(k>1&&k<6){h.FUNC.BASIC.CreateGE(p,m);h.FUNC.BUS.bindImgEffCusEvent(p,m[h.DATA.KEY.OPT_TG_OPTION]);if(k==4||k==5){if(!Fai.isNull(m[h.DATA.KEY.OPT_CALLBACK])){m[h.DATA.KEY.OPT_CALLBACK](p,m[h.DATA.KEY.OPT_IMG_EFF_OPTION],m[h.DATA.KEY.OPT_TG_OPTION],m[h.DATA.KEY.OPT_CALLBACK_ARGS])}}}else{if(k<=7){h.FUNC.BASIC.CreateSP(p,m)}}});if(k==8){Site.hoverChangeImage()}else{f(i).bind("mouseenter mouseleave",function(p){var o=f(this).find(".imageEffects");if(k<6){h.FUNC.TOOL.resetImgEff(m[h.DATA.KEY.OPT_TG_OPTION],this,o,k)}else{if(k<=8){o=f(this).find("img");if(o.length==0){o=f(this).find(".J_fonticon")}}}if(p.type=="mouseenter"){if(k>1&&k<=7){h.FUNC.BUS.ImgEffAnimate("mouseenter",o,m[h.DATA.KEY.OPT_IMG_EFF_OPTION],this,m[h.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0)}}else{if(k>1&&k<=7){h.FUNC.BUS.ImgEffAnimate("mouseleave",o,m[h.DATA.KEY.OPT_IMG_EFF_OPTION],this,m[h.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0)}}})}};h.FUNC.BASIC.CreateGE=function(j,i){c(j,i);b(j,i)};h.FUNC.BASIC.CreateSP=function(j,i){a(j,i);d(j,i)};function e(i,j){if(i.length==0){return false}if(i[h.DATA.KEY.OPT_MODULE_ID]==0){return false}f.extend(j,i);return true}function c(k,i){var l=!Fai.isNull(f(k).find("a"))&&f(k).find("a").length!=0,j;if(l){f(k).find("a").after(h.DATA.imageEffectHtml)}else{j=f(k).find("img");if(j.length==0){j=f(k).find(".J_fonticon")}j.after(h.DATA.imageEffectHtml)}}function b(O,L){if(f(O).find(".J_photoImgPanel").length==0){f(O).css("position","relative").css("overflow","hidden")}if(Fai.isIE6()&&L[h.DATA.KEY.OPT_TG_OPTION].targetParent=="photoSmallPic_table"){f(O).removeAttr("style")}var y=L[h.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;var x=L[h.DATA.KEY.OPT_TG_OPTION].picScale||0;var D=L[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType;var m=f(O).find(".imageEffects"),G=(D==2)?"imageEffects_Border":(D==3)?"imageEffects_Magnifier":(D==4)?"imageEffects_FullMaks":(D==5)?"imageEffects_HalfMaks":"";var F={bw:(L[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?L[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderWidth:1,bs:(L[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?L[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderStyle:1,bc:(L[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?L[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderColor:(y==8?"#808080":"#000")},K=(F.bs==1)?"solid":(F.bs==2)?"dotted":(F.bs==3)?"dashed":"",E=L[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.FULL_MASK_BG_STYLE],j={fbc:L[h.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundColor,fbo:L[h.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundOpacity},q={color:"#555555",opacity:80};var P,v,J,s,t,k,C,B,M,A,z,N,p,H,l,n;if(L.moduleType=="photoCard"||L.moduleType=="photoNewCard"){P=f(O).parent();v=f(P).width();J=f(P).height();s=f(P).css("margin-left");imgMarginTop=f(P).css("margin-top");t=f(P).position().top;k=f(P).position().left;N=parseFloat(f(O).css("margin-top").replace("px",""));p=parseFloat(f(O).css("margin-left").replace("px",""))}else{C=f(O).position().top;B=f(O).height();M=f(O).width();A=f(O).position().left;z=f(O).parent().css("padding-top");P=f(O).find("img");if(P.length==0){P=f(O).find(".J_fonticon")}v=f(P).width();J=f(P).height();s=f(P).css("margin-left");t=f(P).position().top;k=f(P).position().left;l=f(O).find(".J_photoImgPanel").width();n=f(O).find(".J_photoImgPanel").height()}var r=Fai.isIE6()||Fai.isIE7()||Fai.isIE8();var o=L[h.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundType;if(typeof j=="object"&&o){q.color=j.fbc.length!=0?j.fbc:q.color;q.opacity=typeof j.fbo=="number"?j.fbo:q.opacity}var u=L[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.FULL_MASK_CUS_BG];if(typeof E=="string"&&E.length!=0&&u){E=f.parseJSON(E);q.color=E.c.length!=0?E.c:q.color;q.opacity=typeof E.o=="number"?E.o:q.opacity}s=h.FUNC.TOOL.parsePixelToInt(s);z=h.FUNC.TOOL.parsePixelToInt(z);switch(D){case 1:f(m).css("top",t);break;case 2:if(y==8){M-=F.bw*2;B-=F.bw*2;H=f(O).css("padding").replace("px","");v=M+2*H;J=B+2*H;f(m).css("top",C-z)}else{v-=F.bw*2;J-=F.bw*2;f(m).css("top",t)}f(m).css("border",F.bw+"px "+K+" "+F.bc);break;case 3:f(m).css("top",t);f(m).css("z-index","1");break;case 4:var I=q.color;if(!r){var i=h.FUNC.TOOL.colorRgb(q.color);var w=i.split(",");I="rgba("+w[0]+", "+w[1]+", "+w[2]+", "+q.opacity/100+")"}f(m).css("background",I);f(m).css("top",t);break;case 5:f(m).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half");f(m).css("bottom","-"+J+"px");break;case 6:f(m).css("top",t);break;case 7:f(m).css("top",t);break}if(L.moduleType=="photoCard"||L.moduleType=="photoNewCard"){if(D!=5){f(m).css({top:(-N)+"px"});f(m).css({left:(-p)+"px"})}else{f(m).css({"padding-left":(-p)+"px"})}}else{if(D==2&&y==8){f(m).css("left",0)}else{f(m).css("left",k+s)}}if(x==2&&(D==2||D==3||D==5)){if(D==5){f(m).css("width",l).css("height",n)}else{if(D==2){f(m).css("width",l-F.bw*2).css("height",n-F.bw*2)}else{f(m).css("width",l-2).css("height",n-2)}}f(m).css("left",0)}else{f(m).css("width",v);f(m).css("height",J)}f(m).addClass(G)}function a(n,m){var l=f(n).find("img");if(l.length==0){l=f(n).find(".J_fonticon")}var k=m[h.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;if(m[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==6){var j=f(l).width();var i=f(l).height();if(j==0||i==0){return}f(l).attr("_initWidth",j).attr("_initHeight",i)}if(m[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==7){var j=f(l).width();if(j==0){return}if(k==8){f(l).css("width",j+"px")}else{f(l).css("width",j+10+"px")}}}function d(l,i){var m=(i[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==6)?"imageEffectsAnimate_Magnify":"imageEffectsAnimate_MoveLeft";var j=i[h.DATA.KEY.OPT_TG_OPTION].picScale||0,k=f(l).find("img");if(k.length==0){k=f(l).find(".J_fonticon")}f(l).css({overflow:"hidden"});k.addClass(m).css("margin","0px")}})(jQuery,Site.ImageEffect);