(function(b,m,c){var q=[],r=Fai.top.$(".floatLeftTop"),p=Fai.top.$(".floatRightBottom"),h;m.scroll=function(){a()};m.subscribe=function(t){f(t)};m.revoke=function(t){l(t)};m.publishOne=function(t){g(t)};m.publish=function(){o()};m.playAnimation=function(x){var t=Fai.top.$("#module"+x.id),y=typeof x.type!="undefined"?x.type:0,A=typeof x.direction!="undefined"?x.direction:0,v=typeof x.speed!="undefined"?x.speed:0,w=typeof x.delay!="undefined"?x.delay:0,B=i(y,A),z=B+" "+v+"s "+w+"s both",u={module:t,animateStyle:z};if(B.length>0){e(u)}};function i(u,v){var t="";if(u==0){return t}switch(u){case 1:t="fadeIn";break;case 2:t="moveIn";break;case 3:t="zoomIn";break;case 4:t="elasticLarge";break;case 5:t="elasticSmall";break;default:t="";break}switch(v){case 1:t+="Left";break;case 2:t+="Right";break;case 3:t+="Up";break;case 4:t+="Down";break;case 12:t+="LeftRight";break;case 34:t+="UpDown";break;default:t+="";break}return t}function f(x){var u={},w=Fai.top.$("#module"+x.id),y=Site.checkNestModule(w),t=typeof x.only=="boolean"?x.only:true,v=typeof x.refreshSubscribe=="boolean"?x.refreshSubscribe:false;if(w.length<1){return}if(!y.inPack){w.removeClass("animateModule");return}u.moduleId=x.id;u.module=w;u.list=x.list;if(v){u.runed=true}if(t){l({id:x.id})}q.push(u)}function o(){var t=q.length-1,u;while(t>-1){u=q[t];k(u);t-=1}}function g(t){var y=q.length-1,E,z,w,A,C,v,x,D,B,u;while(y>-1){E=q[y];if(E.moduleId==t){z=E.list;w=z[0];A=typeof w.t!="undefined"?w.t:0;C=typeof w.r!="undefined"?w.r:0;v=typeof w.s!="undefined"?w.s:0;x=typeof w.d!="undefined"?w.d:0;D=i(A,C);B=D+" "+v+"s "+x+"s both";u={module:E.module,animateStyle:B};if(D.length>0){e(u)}break}y-=1}}function l(w){var t=q.length-1,u=w.id,v;while(t>-1){v=q[t];if(u==v.moduleId){q.splice(t,1)}t-=1}}function k(A){var L,u=A.module,I=A.moduleId,t=0.1,D=u.height()*t,B=u.width()*t,v=false,E=Site.checkNestModule(u),C=Fai.top.$("#module"+E.parentId),H,G,w,J,F,K,x,z,y;if(A.runed){return}y=s({module:C});if((y.v==6||y.v==3)&&(y.h==6||y.h==3)){v=true}else{if(y.v==3&&(y.h==2||y.h==4)){if(y.vWidth>=B){v=true}}else{if(y.h==3&&(y.v==2||y.v==4)){if(y.vHeight>=D){v=true}}}}if(!v){return}H=A.list;G=H[0];w=typeof G.t!="undefined"?G.t:0;J=typeof G.r!="undefined"?G.r:0;F=typeof G.s!="undefined"?G.s:0;K=typeof G.d!="undefined"?G.d:0;x=i(w,J);z=x+" "+F+"s "+K+"s both";L={module:u,animateStyle:z};if(x.length>0){e(L)}A.runed=true;if(!Fai.top._manageMode){l({id:I})}}function a(){var t=60,u;j().off("scroll.moduleAnimation").on("scroll.moduleAnimation",function(){if(typeof u!="number"){u=setTimeout(function(){o();u=null},t)}})}function s(D){if(typeof D.module!="object"){return}if(!D.module.is(":visible")){return{h:0,v:0,vHeight:0,hWidth:0}}var v=D.module,H=v.offset(),w=v.height(),x=v.width(),K=r.offset(),C=p.offset(),u=K.top,y=C.top,F=K.left,J=C.left,I={moduleOffset:H,moduleHeight:w,moduleWidth:x,topNum:u,bottomNum:y,leftNum:F,rightNum:J},E=Site.checkNestModule(v),t,A,G,z,B;if(E.inPack){t=Fai.top.$("#module"+E.parentId);G=parseInt(t.attr("_infullmeasure"))||0;if(G>0){A=Fai.top.$("#module"+G);z=t.parent().attr("id").split("_")[1]||0;if(A.find(".fullmeasureOuterContentPage"+z).hasClass("hideFmOuterContentPage")){B={h:0,v:0,vHeight:0,hWidth:0};return B}}}if(Fai.top._manageMode){B=d(I)}else{B=n(I)}return B}function d(z){var u=z.moduleOffset.top,w=z.moduleOffset.left,v=z.topNum,A=z.bottomNum,t=z.leftNum,y=z.rightNum,C=z.moduleHeight,E=z.moduleWidth,B=u+C,D=w+E,x=j().scrollLeft(),F={h:3,v:3,vHeight:C,hWidth:E};if(B<v){F.v=1;F.vHeight=0}else{if(u<v){F.v=2;if(C>A){F.v=6}F.vHeight=u-v+C}else{if(B<A){F.v=3;F.vHeight=C}else{if(u<A){F.v=4;if(C>A){F.v=6}F.vHeight=A-u}else{F.v=5;F.vHeight=0}}}}if(w<(-E)){F.h=1;F.vWidth=0}else{if(w<0){F.h=2;if(E>y){F.h=6}F.vWidth=w-t+E}else{if(D<y){F.h=3;F.vWidth=E}else{if(w<y){F.h=4;if(E>y){F.h=6}F.vWidth=y-w}else{F.h=5;F.vWidth=0}}}}return F}function n(z){var u=z.moduleOffset.top,w=z.moduleOffset.left,v=z.topNum,A=z.bottomNum,t=z.leftNum,y=z.rightNum,C=z.moduleHeight,E=z.moduleWidth,B=u+C,D=w+E,x=j().scrollLeft(),F={h:3,v:3,vHeight:C,hWidth:E};if(B<v){F.v=1;F.vHeight=0}else{if(u<v){F.v=2;if(C>(A-v)){F.v=6}F.vHeight=C+u-v}else{if(B<A){F.v=3;F.vHeight=C}else{if(u<A){F.v=4;if(C>(A-v)){F.v=6}F.vHeight=A-u}else{F.v=5;F.vHeight=0}}}}if(D<t){F.h=1;F.vWidth=0}else{if(w<t){F.h=2;if(E>(y-t)){F.h=6}F.vWidth=w-t+E}else{if(D<y){F.h=3;F.vWidth=E}else{if(w<y){F.h=4;if(E>(y-t)){F.h=6}F.vWidth=y-w}else{F.h=5;F.vWidth=0}}}}return F}function e(v){var u=v.module,t=v.animateStyle;if(u.data("animated")!="true"){u.css("animation",t).removeClass("animateModule").one("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(){u.data("animated","true")}).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){u.removeData("animated");b(this).css("animation","none")})}}function j(){if(h){return h}var t=Fai.top||window;h=b(t);if(t._manageMode){h=t.$("#g_main")}return h}})(jQuery,Site.moduleAnimation||(Site.moduleAnimation={}));